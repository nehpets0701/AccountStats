<!DOCTYPE html>
<!--this is what comments look like btw-->

<html lang="en">
    <head>
        <style>
            * > *{
                flex: 1;
            }
            .inputs {
              margin: auto;
              width: 43%;
              border: 3px solid #73AD21;
              padding: 10px;
            }

            .button {
                float: right;
                font-size: 28px;
                cursor: pointer;
            }

            .outputs {
                text-align: center;
                font-weight: bold;
                font-size: 30px;
            }

            header{
                background-color:red;
            }
        </style>

        <header>
            <h1 style="text-align:center">Account Stats</h1>
        </header>
    </head>

    <body>

        <!--html for inputs and button-->
        <div style="border: 3px solid #73AD21; padding-bottom: 50px; padding-top: 20px;">
            <div class="inputs">
                <label>Github Username:</label>
                <input style="height:30px; font-weight: bold;"type="text" size=60 id="githubInput">
            </div>
    
            <br><br>
    
            <div class="inputs">
                <label>Steam Username:</label>
                <input style="height:30px; font-weight: bold;"type="text" size=60 id="steamInput">
            </div>
            
            <br><br>
    
            <div class="inputs">
                <label>Reddit Username:</label>
                <input style="height:30px; font-weight: bold;"type="text" size=60 id="redditInput">
            </div>

            <br>

            <div style="width: 72.3%;">
                <input class="button" onclick="callGithubApi(), callRedditApi()" type="button" value="Enter" id="enterButton">
            </div>
            
        </div>
        <!--html for inputs and buttonS-->

        <br>

        <!--output divs-->
        <div id="githubOutput" class="outputs">
        </div>

        <div id="steamOutput" class="outputs">
        </div>

        <div id="redditOutput" class="outputs">
        </div>
        <!--output divs-->

        <script>
            var enterClick = document;
            var githubRequest;
            var redditRequest;
            enterClick.addEventListener("keyup", function(event) {
                if (event.keyCode === 13) {
                    event.preventDefault();
                    document.getElementById("enterButton").click();
                }
            });

            function printGithubData() {
                var responseObj = JSON.parse(this.responseText);
                if (githubRequest.status == 404) {
                    let print = document.getElementById('githubOutput');
                    print.innerHTML = "Invalid Github Username";
                } else {
                    let print = document.getElementById('githubOutput');
                    print.innerHTML = responseObj.login + " Github Stats:" + "<br>"
                    print.innerHTML += "Number of Public Repos: " + responseObj.public_repos + "<br>";
                    if (responseObj.name != null) {
                        print.innerHTML += "Name: " + responseObj.name + "<br>";
                    } else {
                        print.innerHTML += "Name: None Listed<br>";
                    }
                    if (responseObj.email != null) {
                        print.innerHTML += "Email: " + responseObj.email + "<br><br><br>";
                    } else {
                        print.innerHTML += "Email: None Listed<br><br><br>";
                    }
                }
            }

            function printRedditData() {
                var responseObj = JSON.parse(this.responseText);
                if (redditRequest.status == 404) {
                    let print = document.getElementById('redditOutput');
                    print.innerHTML = "Invalid Reddit Username";
                } else {
                    let print = document.getElementById('redditOutput');
                    print.innerHTML = responseObj.data.name + " Reddit Stats:" + "<br>"
                    print.innerHTML += "Total Karma: " + responseObj.data.total_karma + "<br>"
                    print.innerHTML += "Subscribers: " + responseObj.data.subreddit.subscribers + "<br>"
                }
            }

            function callGithubApi() {
                if (document.getElementById("githubInput").value.length != 0) {
                    githubRequest = new XMLHttpRequest();
                    githubRequest.onload = printGithubData;
                    githubRequest.open('get', 'https://api.github.com/users/' + document.getElementById("githubInput").value);
                    githubRequest.send();
                }
            }

            function callRedditApi() {
                if (document.getElementById("redditInput").value.length != 0) {
                    redditRequest = new XMLHttpRequest();
                    redditRequest.onload = printRedditData;
                    redditRequest.open('get', 'https://www.reddit.com/user/' + document.getElementById("redditInput").value + "/about.json");
                    redditRequest.send();
                }
            }
        </script>
    </body>
</html>
